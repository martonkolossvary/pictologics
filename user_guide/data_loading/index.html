
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBSI-compliant radiomic feature extraction library.">
      
      
        <meta name="author" content="Márton Kolossváry">
      
      
      
        <link rel="prev" href="../quick_start/">
      
      
        <link rel="next" href="../pipeline/">
      
      
        
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Data Loading - Pictologics</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Share+Tech+Mono:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Share Tech Mono";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    


<link rel="icon" type="image/png" sizes="16x16" href="../../assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../assets/favicon-32x32.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../assets/logo.png">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-loading" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pictologics" class="md-header__button md-logo" aria-label="Pictologics" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pictologics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data Loading
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/martonkolossvary/pictologics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    martonkolossvary/pictologics
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../installation/" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/loader/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../benchmarks/" class="md-tabs__link">
        
  
  
    
  
  Benchmarks

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ibsi1_compliance/" class="md-tabs__link">
          
  
  
  IBSI Compliance

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quality/" class="md-tabs__link">
        
  
  
    
  
  Quality Report

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../CHANGELOG/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../LICENSE/" class="md-tabs__link">
        
  
  
    
  
  License

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../NOTICE/" class="md-tabs__link">
        
  
  
    
  
  Notice

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pictologics" class="md-nav__button md-logo" aria-label="Pictologics" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Pictologics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/martonkolossvary/pictologics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    martonkolossvary/pictologics
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Data Loading
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Loading
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-image-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Image Class
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-loading-with-load_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Loading with load_image()
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Loading with load_image()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-nifti-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading NIfTI Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-dicom-series" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading DICOM Series
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-a-single-dicom-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading a Single DICOM File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dicom-intensity-rescaling" class="md-nav__link">
    <span class="md-ellipsis">
      
        DICOM Intensity Rescaling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-sentinel-na-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Sentinel (NA) Values
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling Sentinel (NA) Values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approach-1-resegmentation-simple" class="md-nav__link">
    <span class="md-ellipsis">
      
        Approach 1: Resegmentation (Simple)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approach-2-source-masking-protects-resampling-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Approach 2: Source Masking (Protects Resampling &amp; Filtering)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-phase-dicom-series" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Phase DICOM Series
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Phase DICOM Series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discovering-available-phases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Discovering Available Phases
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-a-specific-phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading a Specific Phase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-detection-priority" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase Detection Priority
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4d-nifti-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        4D NIfTI Files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dicom-segmentation-seg-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        DICOM Segmentation (SEG) Files
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DICOM Segmentation (SEG) Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auto-detection-in-load_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-Detection in load_image()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detailed-control-with-load_seg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Detailed Control with load_seg()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-with-separate-segments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working with Separate Segments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-specific-segments-into-a-binary-mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combining Specific Segments into a Binary Mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aligning-seg-to-a-reference-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aligning SEG to a Reference Image
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-multiple-images-with-load_and_merge_images" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merging Multiple Images with load_and_merge_images()
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Merging Multiple Images with load_and_merge_images()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-merging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Merging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relabeling-masks-for-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relabeling Masks for Visualization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-strategy-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merge Strategy Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-cropped-masks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Cropped Masks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling Cropped Masks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repositioning-a-single-cropped-mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        Repositioning a Single Cropped Mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merging-multiple-cropped-masks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merging Multiple Cropped Masks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-axis-transposition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Axis Transposition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-full-mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a Full Mask
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-of-loading-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary of Loading Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline & Preprocessing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image_filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Image Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configurations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration & Reproducibility
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cookbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/loader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loaders
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preprocessing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/deduplication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/features/intensity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intensity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/features/morphology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Morphology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/features/texture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Texture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmarks
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IBSI Compliance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    IBSI Compliance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi1_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 1 (Features)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi2_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 2 Phase 1 (Filters)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi2_phase2_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 2 Phase 2 (Filtered Features)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi2_phase3_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 2 Phase 3 (Reproducibility)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quality Report
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../NOTICE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notice
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-image-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Image Class
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-loading-with-load_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Loading with load_image()
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Loading with load_image()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loading-nifti-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading NIfTI Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-dicom-series" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading DICOM Series
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-a-single-dicom-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading a Single DICOM File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dicom-intensity-rescaling" class="md-nav__link">
    <span class="md-ellipsis">
      
        DICOM Intensity Rescaling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-sentinel-na-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Sentinel (NA) Values
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling Sentinel (NA) Values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approach-1-resegmentation-simple" class="md-nav__link">
    <span class="md-ellipsis">
      
        Approach 1: Resegmentation (Simple)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approach-2-source-masking-protects-resampling-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Approach 2: Source Masking (Protects Resampling &amp; Filtering)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-phase-dicom-series" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Phase DICOM Series
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multi-Phase DICOM Series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discovering-available-phases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Discovering Available Phases
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-a-specific-phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        Loading a Specific Phase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-detection-priority" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase Detection Priority
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4d-nifti-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        4D NIfTI Files
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dicom-segmentation-seg-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        DICOM Segmentation (SEG) Files
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DICOM Segmentation (SEG) Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auto-detection-in-load_image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-Detection in load_image()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detailed-control-with-load_seg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Detailed Control with load_seg()
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-with-separate-segments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working with Separate Segments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-specific-segments-into-a-binary-mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combining Specific Segments into a Binary Mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aligning-seg-to-a-reference-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aligning SEG to a Reference Image
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merging-multiple-images-with-load_and_merge_images" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merging Multiple Images with load_and_merge_images()
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Merging Multiple Images with load_and_merge_images()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-merging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Merging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relabeling-masks-for-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relabeling Masks for Visualization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-strategy-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merge Strategy Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-cropped-masks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Cropped Masks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling Cropped Masks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repositioning-a-single-cropped-mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        Repositioning a Single Cropped Mask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merging-multiple-cropped-masks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merging Multiple Cropped Masks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-axis-transposition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Axis Transposition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-full-mask" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a Full Mask
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-of-loading-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary of Loading Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="data-loading">Data Loading</h1>
<p>This guide covers all aspects of loading medical imaging data into Pictologics. Whether you're working with NIfTI files, DICOM series, multi-phase acquisitions, or segmentation masks, this page will help you get your data into the <code>Image</code> class for radiomics analysis.</p>
<h2 id="the-image-class">The Image Class</h2>
<p>All data in Pictologics is represented by the <code>Image</code> dataclass, which provides a standardized container for 3D medical image data. All data are stored as 3D numpy arrays, with additional metadata to describe the geometry of the data. If 2D data is provided, it is converted to a 3D numpy array with a singleton dimension.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Image attributes:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># - array: numpy.ndarray (3D, in X, Y, Z order)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># - spacing: tuple[float, float, float] (voxel dimensions in mm)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1"># - origin: tuple[float, float, float] (world coordinates of first voxel)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># - direction: Optional[numpy.ndarray] (3x3 direction cosine matrix)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># - modality: str (e.g., &quot;CT&quot;, &quot;MR&quot;, &quot;Unknown&quot;)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pictologics uses <strong>(X, Y, Z)</strong> axis ordering to match ITK/SimpleITK conventions. This differs from raw DICOM (which uses Rows, Columns = Y, X) and matplotlib (which expects height, width = Y, X). All loaders handle these transformations automatically.</p>
</div>
<h2 id="basic-loading-with-load_image">Basic Loading with <code>load_image()</code></h2>
<p>The <code>load_image()</code> function is the primary entry point for loading data. It automatically detects the file format and handles the appropriate loading strategy.</p>
<h3 id="loading-nifti-files">Loading NIfTI Files</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_image</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># Load a NIfTI file (.nii or .nii.gz)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">image</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/scan.nii.gz&quot;</span><span class="p">)</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">mask</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/segmentation.nii.gz&quot;</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shape: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Spacing: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">spacing</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Origin: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">origin</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="loading-dicom-series">Loading DICOM Series</h3>
<p>For a directory containing DICOM files from a single series:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Load all DICOM files in a directory as a single volume</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">image</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/dicom_folder/&quot;</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Pictologics automatically:</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1"># - Finds all DICOM files in the directory</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="c1"># - Sorts slices by spatial position</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1"># - Extracts spacing, origin, and direction from headers</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="c1"># - Stacks slices into a 3D volume</span>
</code></pre></div>
<h3 id="loading-a-single-dicom-file">Loading a Single DICOM File</h3>
<p>Single DICOM files (e.g., enhanced DICOM, segmentation objects) are also supported:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Load a single DICOM file</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">image</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/image.dcm&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="dicom-intensity-rescaling">DICOM Intensity Rescaling</h3>
<p>By default, <code>load_image()</code> applies <strong>RescaleSlope</strong> and <strong>RescaleIntercept</strong> transformations to DICOM data, converting stored pixel values to real-world values (e.g., Hounsfield Units for CT). This matches the behavior of NIfTI loading, which always applies its scaling factors.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Default: values are converted (e.g., to Hounsfield Units)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">ct</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;ct_scan/&quot;</span><span class="p">)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">ct</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>  <span class="c1"># e.g., -1024.0 to 3000.0</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># If you need raw stored pixel values:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="n">ct_raw</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;ct_scan/&quot;</span><span class="p">,</span> <span class="n">apply_rescale</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">ct_raw</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">ct_raw</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>  <span class="c1"># e.g., 0 to 4095</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Format</th>
<th>Rescaling Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NIfTI</strong></td>
<td>Always applies <code>scl_slope</code> and <code>scl_inter</code> from header</td>
</tr>
<tr>
<td><strong>DICOM</strong></td>
<td>Applies <code>RescaleSlope</code> and <code>RescaleIntercept</code> when <code>apply_rescale=True</code> (default)</td>
</tr>
</tbody>
</table>
<h3 id="handling-sentinel-na-values">Handling Sentinel (NA) Values</h3>
<p>Medical imaging formats often use a <strong>sentinel value</strong> to represent missing or invalid data. Common examples:</p>
<table>
<thead>
<tr>
<th>Modality</th>
<th>Common Sentinel Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>CT</td>
<td>-1024, -2048, -32768 (outside tissue HU range)</td>
</tr>
<tr>
<td>MR</td>
<td>0 (often used for background/air)</td>
</tr>
<tr>
<td>PET</td>
<td>0 or negative values</td>
</tr>
</tbody>
</table>
<p>Since DICOM uses integer storage and cannot represent <code>NaN</code>, these sentinel values are substituted for missing data. Pictologics offers two approaches for handling them:</p>
<h4 id="approach-1-resegmentation-simple">Approach 1: Resegmentation (Simple)</h4>
<p>Use the <strong><code>resegment</code></strong> preprocessing step to exclude sentinel values by restricting the ROI to a valid intensity range:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">RadiomicsPipeline</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">pipeline</span> <span class="o">=</span> <span class="n">RadiomicsPipeline</span><span class="p">()</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">pipeline</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span><span class="s2">&quot;ct_analysis&quot;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="c1"># Exclude sentinel values by filtering to valid HU range</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="s2">&quot;resegment&quot;</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;range_min&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;range_max&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">}},</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="s2">&quot;discretise&quot;</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;FBN&quot;</span><span class="p">,</span> <span class="s2">&quot;n_bins&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">}},</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="s2">&quot;extract_features&quot;</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;families&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;intensity&quot;</span><span class="p">,</span> <span class="s2">&quot;texture&quot;</span><span class="p">]}},</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="p">])</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Limitations of resegmentation alone</p>
<p>Resegmentation removes sentinel voxels from the ROI <strong>after</strong> earlier pipeline steps have already
run. This means:</p>
<ul>
<li><strong>Resampling</strong>: When the image is resampled to a new voxel spacing, the interpolation kernel
  reads neighboring voxels — including sentinel values. A valid voxel next to a -2048 sentinel
  will receive a blended value that is far below its true intensity, corrupting the resampled
  output.</li>
<li><strong>Filtering</strong>: Convolution-based filters (e.g., LoG, Gabor, wavelets) sum intensities over
  a local neighborhood. Any sentinel voxels within the kernel window contribute their artificial
  values to the filter response, producing incorrect texture and edge features.</li>
</ul>
<p>This approach works well when the pipeline <strong>only</strong> discretises and extracts features (no
resampling or filtering). For pipelines that include resampling or filtering, combine
resegmentation with <strong>Approach 2</strong> (source masking) — see below.</p>
</div>
<h4 id="approach-2-source-masking-protects-resampling-filtering">Approach 2: Source Masking (Protects Resampling &amp; Filtering)</h4>
<p>When your images contain sentinel values that could <strong>contaminate resampling and filtering</strong> (e.g., pre-cropped lesion exports), use sentinel detection and source masking. This creates a <em>source mask</em> that ensures sentinel voxels are excluded from interpolation and convolution operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_image</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">detect_sentinel_value</span><span class="p">,</span> <span class="n">create_source_mask_from_sentinel</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">image</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;lesion_export.nii.gz&quot;</span><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1"># Automatically detect sentinel value</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">sentinel</span> <span class="o">=</span> <span class="n">detect_sentinel_value</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detected sentinel: </span><span class="si">{</span><span class="n">sentinel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># e.g., -2048.0</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="c1"># Create source mask (1 = valid, 0 = sentinel)</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="n">source_mask</span> <span class="o">=</span> <span class="n">create_source_mask_from_sentinel</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">sentinel</span><span class="p">)</span>
</code></pre></div>
<p>The source mask enables <strong>masked interpolation</strong> for resampling and <strong>normalized convolution</strong> for filters, preventing sentinel values from bleeding into valid regions.</p>
<div class="admonition warning">
<p class="admonition-title">Source masking does not replace resegmentation</p>
<p>The source mask protects <strong>resampling and filtering only</strong> — it does <strong>not</strong> change the ROI
used for feature extraction. Sentinel voxels will still be included in intensity statistics,
texture matrices, and all other computed features unless you also add a <code>resegment</code> step to
restrict the ROI to a valid intensity range. In practice, you typically need <strong>both</strong>:</p>
<ul>
<li><code>source_mode="auto"</code> (or an explicit source mask) to protect preprocessing</li>
<li><code>resegment</code> to define the correct ROI for feature extraction</li>
</ul>
<p>See the <strong><a href="../quick_start/">Quick Start</a></strong> guide for a complete workflow and the
<strong><a href="../cookbook/">Cookbook</a></strong> for batch processing examples.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Check your data's minimum value to identify potential sentinels:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">image</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;scan.dcm&quot;</span><span class="p">)</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Min: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">}</span><span class="s2">, Max: </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1"># If min is -1024 or -2048, those are likely sentinels</span>
</code></pre></div></p>
</div>
<h2 id="multi-phase-dicom-series">Multi-Phase DICOM Series</h2>
<p>Many clinical acquisitions contain multiple phases (e.g., cardiac CT with multiple timepoints). Pictologics can detect and load specific phases from datasets.</p>
<h3 id="discovering-available-phases">Discovering Available Phases</h3>
<p>Use <code>get_dicom_phases()</code> to explore what's available before loading:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_dicom_phases</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="c1"># Discover phases in a multi-phase DICOM directory</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">phases</span> <span class="o">=</span> <span class="n">get_dicom_phases</span><span class="p">(</span><span class="s2">&quot;path/to/cardiac_ct/&quot;</span><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">phases</span><span class="p">)</span><span class="si">}</span><span class="s2"> phases:&quot;</span><span class="p">)</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">:</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--- Phase </span><span class="si">{</span><span class="n">phase</span><span class="o">.</span><span class="n">index</span><span class="si">}</span><span class="s2"> ---&quot;</span><span class="p">)</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Label:       </span><span class="si">{</span><span class="n">phase</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Split Tag:   </span><span class="si">{</span><span class="n">phase</span><span class="o">.</span><span class="n">split_tag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Split Value: </span><span class="si">{</span><span class="n">phase</span><span class="o">.</span><span class="n">split_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Num Slices:  </span><span class="si">{</span><span class="n">phase</span><span class="o">.</span><span class="n">num_slices</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>    <span class="c1"># Show first file path as example</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Example File: </span><span class="si">{</span><span class="n">phase</span><span class="o">.</span><span class="n">file_paths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Example output:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Found 10 phases:
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>--- Phase 0 ---
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Label:       Phase 0%
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Split Tag:   NominalPercentageOfCardiacPhase
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>Split Value: 0
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>Num Slices:  256
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>Example File: IM-0001-0001.dcm
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>--- Phase 1 ---
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>Label:       Phase 10%
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>Split Tag:   NominalPercentageOfCardiacPhase
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>Split Value: 10
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>Num Slices:  256
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>Example File: IM-0001-0225.dcm
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>...
</code></pre></div></p>
<p>Each <code>DicomPhaseInfo</code> object contains:</p>
<ul>
<li><code>index</code>: Phase index (0, 1, 2, ...)</li>
<li><code>label</code>: Human-readable label (e.g., "CardiacPhase=0", "TemporalPosition=1")</li>
<li><code>num_slices</code>: Number of slices in this phase</li>
<li><code>split_tag</code>: The DICOM tag used for detection</li>
<li><code>split_value</code>: The actual tag value</li>
</ul>
<h3 id="loading-a-specific-phase">Loading a Specific Phase</h3>
<p>Use the <code>dataset_index</code> parameter to load a particular phase:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Load the first phase (index 0)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">phase_0</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/cardiac_ct/&quot;</span><span class="p">,</span> <span class="n">dataset_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1"># Load the second phase (index 1)</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">phase_1</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/cardiac_ct/&quot;</span><span class="p">,</span> <span class="n">dataset_index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h3 id="phase-detection-priority">Phase Detection Priority</h3>
<p>Pictologics automatically detects phases using these DICOM tags (in order of priority):</p>
<ol>
<li><strong>NominalPercentageOfCardiacPhase</strong> - Cardiac phases (percentage)</li>
<li><strong>TemporalPositionIdentifier</strong> - Temporal position index</li>
<li><strong>TriggerTime</strong> - ECG trigger time</li>
<li><strong>AcquisitionNumber</strong> - Acquisition sequence number</li>
<li><strong>EchoNumber</strong> - Multi-echo MRI</li>
</ol>
<h2 id="4d-nifti-files">4D NIfTI Files</h2>
<p>NIfTI files can contain 4D data (3D + time/phase). Use <code>dataset_index</code> similarly:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Load a 4D NIfTI file - get the first volume</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">vol_0</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/4d_data.nii.gz&quot;</span><span class="p">,</span> <span class="n">dataset_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c1"># Load the second volume</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">vol_1</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/4d_data.nii.gz&quot;</span><span class="p">,</span> <span class="n">dataset_index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h2 id="dicom-segmentation-seg-files">DICOM Segmentation (SEG) Files</h2>
<p>DICOM SEG files are specialized objects containing segmentation masks. Use <code>load_seg()</code> for full control, or let <code>load_image()</code> auto-detect them.</p>
<h3 id="auto-detection-in-load_image">Auto-Detection in load_image()</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># load_image() automatically detects DICOM SEG files</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">mask</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/segmentation.dcm&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="detailed-control-with-load_seg">Detailed Control with load_seg()</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_seg</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics.loaders</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_segment_info</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1"># First, inspect what segments are available</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="n">segments</span> <span class="o">=</span> <span class="n">get_segment_info</span><span class="p">(</span><span class="s2">&quot;path/to/segmentation.dcm&quot;</span><span class="p">)</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Segment </span><span class="si">{</span><span class="n">seg</span><span class="p">[</span><span class="s1">&#39;segment_number&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">seg</span><span class="p">[</span><span class="s1">&#39;segment_label&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="c1"># Load all segments combined into a single label mask</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="c1"># Each segment gets its numeric label (1, 2, 3, etc.)</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="n">combined_mask</span> <span class="o">=</span> <span class="n">load_seg</span><span class="p">(</span><span class="s2">&quot;path/to/segmentation.dcm&quot;</span><span class="p">)</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">combined_mask</span><span class="o">.</span><span class="n">array</span><span class="p">))</span>  <span class="c1"># [0, 1, 2, 3, ...]</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="c1"># Background = 0, Segment 1 = 1, Segment 2 = 2, etc.</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="c1"># Load only specific segments</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="n">liver_mask</span> <span class="o">=</span> <span class="n">load_seg</span><span class="p">(</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>    <span class="s2">&quot;path/to/segmentation.dcm&quot;</span><span class="p">,</span>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>    <span class="n">segment_numbers</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>  <span class="c1"># Only segments 1 and 2</span>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="p">)</span>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="c1"># Load segments separately (returns dict)</span>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="n">separate_masks</span> <span class="o">=</span> <span class="n">load_seg</span><span class="p">(</span>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>    <span class="s2">&quot;path/to/segmentation.dcm&quot;</span><span class="p">,</span>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>    <span class="n">combine_segments</span><span class="o">=</span><span class="kc">False</span>
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="p">)</span>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="c1"># separate_masks = {1: Image(...), 2: Image(...), ...}</span>
</code></pre></div>
<h3 id="working-with-separate-segments">Working with Separate Segments</h3>
<p>When using <code>combine_segments=False</code>, you can iterate over segments for individual analysis:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># Get each segment as a separate binary mask</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">masks</span> <span class="o">=</span> <span class="n">load_seg</span><span class="p">(</span><span class="s2">&quot;seg.dcm&quot;</span><span class="p">,</span> <span class="n">combine_segments</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1"># Iterate over segments</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="k">for</span> <span class="n">seg_num</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="n">masks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Segment </span><span class="si">{</span><span class="n">seg_num</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">mask</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">}</span><span class="s2"> voxels&quot;</span><span class="p">)</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="c1"># Process each segment for radiomics</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="k">for</span> <span class="n">seg_num</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="n">masks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    <span class="n">features</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">ct</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
</code></pre></div>
<h3 id="combining-specific-segments-into-a-binary-mask">Combining Specific Segments into a Binary Mask</h3>
<p>To merge selected segments into a single binary mask:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Load specific segments separately</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">masks</span> <span class="o">=</span> <span class="n">load_seg</span><span class="p">(</span><span class="s2">&quot;seg.dcm&quot;</span><span class="p">,</span> <span class="n">segment_numbers</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">combine_segments</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># Combine into single binary mask using logical OR</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">masks</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">array</span> <span class="o">|</span> <span class="n">masks</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">array</span>
</code></pre></div>
<h3 id="aligning-seg-to-a-reference-image">Aligning SEG to a Reference Image</h3>
<p>SEG files may have different geometry than the source image. Use <code>reference_image</code> to align:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># Load the CT image</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">ct</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/ct_series/&quot;</span><span class="p">)</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1"># Load and align the segmentation to CT geometry</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="n">mask</span> <span class="o">=</span> <span class="n">load_seg</span><span class="p">(</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>    <span class="s2">&quot;path/to/segmentation.dcm&quot;</span><span class="p">,</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    <span class="n">reference_image</span><span class="o">=</span><span class="n">ct</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="p">)</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="c1"># Now mask.array.shape == ct.array.shape</span>
</code></pre></div>
<h2 id="merging-multiple-images-with-load_and_merge_images">Merging Multiple Images with <code>load_and_merge_images()</code></h2>
<p>When you have multiple segmentation masks (e.g., different organs, or masks split across files), use <code>load_and_merge_images()</code> to combine them.</p>
<h3 id="basic-merging">Basic Merging</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_and_merge_images</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="c1"># Merge multiple mask files into one</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="n">combined_mask</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">([</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>    <span class="s2">&quot;path/to/liver_mask.nii.gz&quot;</span><span class="p">,</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>    <span class="s2">&quot;path/to/kidney_mask.nii.gz&quot;</span><span class="p">,</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>    <span class="s2">&quot;path/to/spleen_mask.nii.gz&quot;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="p">])</span>
</code></pre></div>
<h3 id="relabeling-masks-for-visualization">Relabeling Masks for Visualization</h3>
<p>When merging binary masks, assign unique labels to each:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># Each mask gets a unique label (1, 2, 3, ...)</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">(</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    <span class="p">[</span><span class="s2">&quot;mask1.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;mask2.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;mask3.nii.gz&quot;</span><span class="p">],</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    <span class="n">relabel_masks</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="p">)</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="c1"># Result: voxels from mask1 = 1, mask2 = 2, mask3 = 3</span>
</code></pre></div>
<h3 id="merge-strategy-options">Merge Strategy Options</h3>
<p>Control how overlapping voxels are handled:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># &quot;max&quot; (default): Take the maximum value at each voxel</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">(</span><span class="n">masks</span><span class="p">,</span> <span class="n">conflict_resolution</span><span class="o">=</span><span class="s2">&quot;max&quot;</span><span class="p">)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c1"># &quot;min&quot;: Take the minimum value at each voxel</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">(</span><span class="n">masks</span><span class="p">,</span> <span class="n">conflict_resolution</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">)</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="c1"># &quot;first&quot;: Keep the first non-zero value</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">(</span><span class="n">masks</span><span class="p">,</span> <span class="n">conflict_resolution</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">)</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="c1"># &quot;last&quot;: Keep the last non-zero value</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">(</span><span class="n">masks</span><span class="p">,</span> <span class="n">conflict_resolution</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="handling-cropped-masks">Handling Cropped Masks</h2>
<p>Medical imaging software often stores segmentation masks as <strong>cropped volumes</strong> (bounding boxes around the region of interest) to minimize storage. When loading these cropped masks, they need to be repositioned into the original image's coordinate space for proper visualization and analysis.</p>
<p>The <code>pictologics</code> loader uses the spatial metadata (<code>ImagePositionPatient</code> for DICOM, affine matrix for NIfTI) to calculate where the cropped mask belongs in the full volume.</p>
<h3 id="repositioning-a-single-cropped-mask">Repositioning a Single Cropped Mask</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1"># Load the full CT image</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="n">ct</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/full_ct/&quot;</span><span class="p">)</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="c1"># Load a cropped mask and reposition it</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="n">cropped_mask</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    <span class="s2">&quot;path/to/cropped_mask.nii.gz&quot;</span><span class="p">,</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    <span class="n">reference_image</span><span class="o">=</span><span class="n">ct</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="p">)</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="c1"># cropped_mask now has the same shape as ct</span>
</code></pre></div>
<h3 id="merging-multiple-cropped-masks">Merging Multiple Cropped Masks</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># Load CT as reference</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">ct</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;path/to/ct/&quot;</span><span class="p">)</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="c1"># Merge cropped masks into reference space</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">(</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    <span class="p">[</span><span class="s2">&quot;cropped_liver.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;cropped_kidney.nii.gz&quot;</span><span class="p">],</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>    <span class="n">reference_image</span><span class="o">=</span><span class="n">ct</span><span class="p">,</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    <span class="n">reposition_to_reference</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>    <span class="n">relabel_masks</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="p">)</span>
</code></pre></div>
<h3 id="handling-axis-transposition">Handling Axis Transposition</h3>
<p>If your masks have different axis ordering (e.g., from different software), specify the transformation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">combined</span> <span class="o">=</span> <span class="n">load_and_merge_images</span><span class="p">(</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    <span class="n">mask_paths</span><span class="p">,</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>    <span class="n">reference_image</span><span class="o">=</span><span class="n">ct</span><span class="p">,</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>    <span class="n">reposition_to_reference</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>    <span class="n">transpose_axes</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># Swap X and Y axes</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="p">)</span>
</code></pre></div>
<h3 id="error-handling">Error Handling</h3>
<table>
<thead>
<tr>
<th>Issue</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>Spacing mismatch</td>
<td><code>ValueError</code> raised (resampling not yet supported)</td>
</tr>
<tr>
<td>Orientation mismatch</td>
<td>Warning emitted, positioning continues</td>
</tr>
<tr>
<td>Mask outside reference bounds</td>
<td>Warning emitted, empty volume returned</td>
</tr>
<tr>
<td>Partial overlap</td>
<td>Valid region is positioned, rest is clipped</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Label Order</strong>: When using <code>relabel_masks=True</code>, labels are assigned based on the order of files in <code>image_paths</code>. Use <code>sorted()</code> for consistent ordering, or specify the exact order you want.</p>
</div>
<h2 id="creating-a-full-mask">Creating a Full Mask</h2>
<p>When you don't have a segmentation mask and want to analyze the entire image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_full_mask</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="c1"># Create a mask of all ones matching the image geometry</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="n">image</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="s2">&quot;scan.nii.gz&quot;</span><span class="p">)</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="n">full_mask</span> <span class="o">=</span> <span class="n">create_full_mask</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="c1"># Now use full_mask for whole-image analysis</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you pass <code>mask=None</code> to <code>RadiomicsPipeline.run()</code>, it automatically creates a full mask internally.</p>
</div>
<h2 id="summary-of-loading-functions">Summary of Loading Functions</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>load_image()</code></td>
<td>Main entry point - loads NIfTI, DICOM series, single DICOM, or DICOM SEG</td>
</tr>
<tr>
<td><code>load_seg()</code></td>
<td>Detailed DICOM SEG loading with segment selection and alignment</td>
</tr>
<tr>
<td><code>get_segment_info()</code></td>
<td>Inspect available segments in a DICOM SEG file</td>
</tr>
<tr>
<td><code>load_and_merge_images()</code></td>
<td>Combine multiple images/masks with various strategies</td>
</tr>
<tr>
<td><code>create_full_mask()</code></td>
<td>Create an all-ones mask matching image geometry</td>
</tr>
<tr>
<td><code>get_dicom_phases()</code></td>
<td>Discover available phases in multi-phase DICOM</td>
</tr>
</tbody>
</table>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="../pipeline/">Pipeline &amp; Preprocessing</a> - Configure and run the radiomics pipeline</li>
<li><a href="../cookbook/">Cookbook</a> - End-to-end batch processing scripts</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 Márton Kolossváry. Licensed under Apache 2.0.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>