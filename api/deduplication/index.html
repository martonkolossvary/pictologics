
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBSI-compliant radiomic feature extraction library.">
      
      
        <meta name="author" content="Márton Kolossváry">
      
      
      
        <link rel="prev" href="../pipeline/">
      
      
        <link rel="next" href="../filters/">
      
      
        
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Deduplication - Pictologics</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Share+Tech+Mono:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Share Tech Mono";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    


<link rel="icon" type="image/png" sizes="16x16" href="../../assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../assets/favicon-32x32.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../assets/logo.png">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deduplication-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pictologics" class="md-header__button md-logo" aria-label="Pictologics" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pictologics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deduplication
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/martonkolossvary/pictologics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    martonkolossvary/pictologics
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user_guide/installation/" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../loader/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../benchmarks/" class="md-tabs__link">
        
  
  
    
  
  Benchmarks

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ibsi1_compliance/" class="md-tabs__link">
          
  
  
  IBSI Compliance

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quality/" class="md-tabs__link">
        
  
  
    
  
  Quality Report

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../CHANGELOG/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../LICENSE/" class="md-tabs__link">
        
  
  
    
  
  License

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../NOTICE/" class="md-tabs__link">
        
  
  
    
  
  Notice

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pictologics" class="md-nav__button md-logo" aria-label="Pictologics" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Pictologics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/martonkolossvary/pictologics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    martonkolossvary/pictologics
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/quick_start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/data_loading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Loading
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline & Preprocessing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/image_filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Image Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/configurations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration & Reproducibility
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/cookbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loaders
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preprocessing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Deduplication
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Deduplication
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-results-are-handled" class="md-nav__link">
    <span class="md-ellipsis">
      
        How Results Are Handled
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How Results Are Handled">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#result-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Result Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-results-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Results Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-tables-and-concatenation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Tables and Concatenation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deduplicationrules" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationRules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationRules" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationRules
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DeduplicationRules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationRules.version" class="md-nav__link">
    <span class="md-ellipsis">
      
        version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationRules.family_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        family_dependencies
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preprocessingsignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        PreprocessingSignature
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.PreprocessingSignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        PreprocessingSignature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PreprocessingSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.PreprocessingSignature.json_repr" class="md-nav__link">
    <span class="md-ellipsis">
      
        json_repr
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.PreprocessingSignature.from_steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurationanalyzer" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigurationAnalyzer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.ConfigurationAnalyzer" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigurationAnalyzer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigurationAnalyzer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.ConfigurationAnalyzer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.ConfigurationAnalyzer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      
        analyze
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deduplicationplan" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationPlan
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationPlan" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationPlan
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rules Registry
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.RULES_REGISTRY" class="md-nav__link">
    <span class="md-ellipsis">
      
        RULES_REGISTRY
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RULES_REGISTRY">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-versions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Available Versions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helper Functions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.get_default_rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_default_rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-family-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Feature Family Dependencies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-radiomicspipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with RadiomicsPipeline
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/intensity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intensity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/morphology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Morphology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/texture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Texture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmarks
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IBSI Compliance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    IBSI Compliance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi1_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 1 (Features)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi2_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 2 Phase 1 (Filters)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi2_phase2_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 2 Phase 2 (Filtered Features)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ibsi2_phase3_compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IBSI 2 Phase 3 (Reproducibility)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quality Report
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../NOTICE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notice
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-results-are-handled" class="md-nav__link">
    <span class="md-ellipsis">
      
        How Results Are Handled
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How Results Are Handled">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#result-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Result Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-results-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Results Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-tables-and-concatenation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Tables and Concatenation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deduplicationrules" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationRules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationRules" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationRules
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DeduplicationRules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationRules.version" class="md-nav__link">
    <span class="md-ellipsis">
      
        version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationRules.family_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        family_dependencies
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preprocessingsignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        PreprocessingSignature
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.PreprocessingSignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        PreprocessingSignature
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PreprocessingSignature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.PreprocessingSignature.json_repr" class="md-nav__link">
    <span class="md-ellipsis">
      
        json_repr
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.PreprocessingSignature.from_steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurationanalyzer" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigurationAnalyzer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.ConfigurationAnalyzer" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConfigurationAnalyzer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConfigurationAnalyzer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.ConfigurationAnalyzer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pictologics.deduplication.ConfigurationAnalyzer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      
        analyze
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deduplicationplan" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationPlan
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.DeduplicationPlan" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicationPlan
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rules Registry
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.RULES_REGISTRY" class="md-nav__link">
    <span class="md-ellipsis">
      
        RULES_REGISTRY
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RULES_REGISTRY">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-versions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Available Versions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helper Functions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pictologics.deduplication.get_default_rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_default_rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-family-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Feature Family Dependencies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-radiomicspipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with RadiomicsPipeline
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="deduplication-api">Deduplication API</h1>
<p>The deduplication module provides intelligent optimization for multi-configuration radiomic feature extraction. When multiple configurations share preprocessing steps but differ only in discretization, the system avoids redundant computation by identifying which feature families can be computed once and reused.</p>
<h2 id="overview">Overview</h2>
<p>The deduplication system consists of four main components:</p>
<ol>
<li><strong><code>DeduplicationRules</code></strong>: Defines which preprocessing steps affect which feature families</li>
<li><strong><code>PreprocessingSignature</code></strong>: Creates hashable representations of preprocessing states</li>
<li><strong><code>ConfigurationAnalyzer</code></strong>: Analyzes pipeline configurations to identify optimization opportunities</li>
<li><strong><code>DeduplicationPlan</code></strong>: Generates optimized execution plans</li>
</ol>
<h2 id="quick-start">Quick Start</h2>
<div class="admonition info">
<p class="admonition-title">Enabled by Default</p>
<p>Deduplication is <strong>enabled by default</strong> (<code>deduplicate=True</code>). You don't need to explicitly enable it—just create a pipeline and run multiple configurations.</p>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">RadiomicsPipeline</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Deduplication is enabled by default!</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">pipeline</span> <span class="o">=</span> <span class="n">RadiomicsPipeline</span><span class="p">()</span>  <span class="c1"># deduplicate=True is the default</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1"># Add multiple configurations with shared preprocessing</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># ... (morphology/intensity computed once, reused across configs)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="n">results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">config_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;config1&quot;</span><span class="p">,</span> <span class="s2">&quot;config2&quot;</span><span class="p">,</span> <span class="s2">&quot;config3&quot;</span><span class="p">])</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="c1"># Check performance statistics</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">deduplication_stats</span><span class="p">)</span>
</code></pre></div>
<p>For complete usage examples, see <a href="../../user_guide/cookbook/#case-7-multi-configuration-batch-with-deduplication">Case 7: Multi-configuration batch with deduplication</a>.</p>
<hr />
<h2 id="how-results-are-handled">How Results Are Handled</h2>
<p>When deduplication reuses features from a previous configuration, the features are <strong>copied</strong> to the reusing configuration's results—they are never empty or missing.</p>
<h3 id="result-behavior">Result Behavior</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Scenario</th>
<th style="text-align: left;">Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>deduplicate=True</strong> (default)</td>
<td style="text-align: left;">Features computed once, then <strong>copied</strong> to all configs with matching preprocessing. All configs receive complete feature sets.</td>
</tr>
<tr>
<td style="text-align: left;"><strong>deduplicate=False</strong></td>
<td style="text-align: left;">Features computed independently for each config. Same results, but slower.</td>
</tr>
</tbody>
</table>
<h3 id="example-results-structure">Example: Results Structure</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">config_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fbn_8&quot;</span><span class="p">,</span> <span class="s2">&quot;fbn_16&quot;</span><span class="p">,</span> <span class="s2">&quot;fbn_32&quot;</span><span class="p">])</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># All configs have IDENTICAL morphology values (computed once, copied to others)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="k">assert</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;fbn_8&quot;</span><span class="p">][</span><span class="s2">&quot;volume_mesh_ml_HTUR&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;fbn_16&quot;</span><span class="p">][</span><span class="s2">&quot;volume_mesh_ml_HTUR&quot;</span><span class="p">]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">assert</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;fbn_8&quot;</span><span class="p">][</span><span class="s2">&quot;volume_mesh_ml_HTUR&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;fbn_32&quot;</span><span class="p">][</span><span class="s2">&quot;volume_mesh_ml_HTUR&quot;</span><span class="p">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1"># Texture features DIFFER (depend on discretization)</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">assert</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;fbn_8&quot;</span><span class="p">][</span><span class="s2">&quot;glcm_joint_avg_d1_HTUR&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;fbn_32&quot;</span><span class="p">][</span><span class="s2">&quot;glcm_joint_avg_d1_HTUR&quot;</span><span class="p">]</span>
</code></pre></div>
<h3 id="data-tables-and-concatenation">Data Tables and Concatenation</h3>
<p>When you concatenate results into a single DataFrame (e.g., for machine learning), every configuration row is <strong>complete</strong>—no missing values due to deduplication:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pictologics</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_results</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Format results for each config</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="k">for</span> <span class="n">config_name</span><span class="p">,</span> <span class="n">features</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>    <span class="n">row</span> <span class="o">=</span> <span class="n">format_results</span><span class="p">({</span><span class="n">config_name</span><span class="p">:</span> <span class="n">features</span><span class="p">},</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="n">config_name</span><span class="p">})</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="c1"># Concatenate into single DataFrame - NO missing values!</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># (3, N) - all rows complete</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>  <span class="c1"># 0 - no NaN values</span>
</code></pre></div>
<hr />
<h2 id="deduplicationrules">DeduplicationRules</h2>


<div class="doc doc-object doc-class">



<h2 id="pictologics.deduplication.DeduplicationRules" class="doc doc-heading">
            <code>pictologics.deduplication.DeduplicationRules</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">



        <p>Defines which preprocessing steps affect each feature family.</p>
<p>This is a frozen (immutable) dataclass that specifies the dependencies
between preprocessing steps and feature families. Rules are versioned
to ensure reproducibility when sharing configurations.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="version

  
      instance-attribute
   (pictologics.deduplication.DeduplicationRules.version)" href="#pictologics.deduplication.DeduplicationRules.version">version</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Semantic version string for this rules definition.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="family_dependencies

  
      instance-attribute
   (pictologics.deduplication.DeduplicationRules.family_dependencies)" href="#pictologics.deduplication.DeduplicationRules.family_dependencies">family_dependencies</a></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="frozenset">frozenset</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of feature family names to the set of
preprocessing step names that affect their output.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pictologics.deduplication.DeduplicationRules.ivh_discretization_dependent_unless">ivh_discretization_dependent_unless</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Condition under which IVH becomes
independent of discretization (e.g., "ivh_use_continuous=True").</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pictologics.deduplication.DeduplicationRules.comparison_mode">comparison_mode</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How to compare preprocessing parameters ("exact_params").</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>pictologics/deduplication.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="k">class</span><span class="w"> </span><span class="nc">DeduplicationRules</span><span class="p">:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">    Defines which preprocessing steps affect each feature family.</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    This is a frozen (immutable) dataclass that specifies the dependencies</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    between preprocessing steps and feature families. Rules are versioned</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    to ensure reproducibility when sharing configurations.</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">        version: Semantic version string for this rules definition.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">        family_dependencies: Mapping of feature family names to the set of</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">            preprocessing step names that affect their output.</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        ivh_discretization_dependent_unless: Condition under which IVH becomes</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">            independent of discretization (e.g., &quot;ivh_use_continuous=True&quot;).</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        comparison_mode: How to compare preprocessing parameters (&quot;exact_params&quot;).</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="n">family_dependencies</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">frozenset</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="n">ivh_discretization_dependent_unless</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="n">comparison_mode</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize rules to a dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>            <span class="s2">&quot;family_dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>                <span class="n">k</span><span class="p">:</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">family_dependencies</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>            <span class="p">},</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>            <span class="s2">&quot;ivh_discretization_dependent_unless&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ivh_discretization_dependent_unless</span><span class="p">,</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>            <span class="s2">&quot;comparison_mode&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">comparison_mode</span><span class="p">,</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="p">}</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;DeduplicationRules&quot;</span><span class="p">:</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize rules from a dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>            <span class="n">version</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">],</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>            <span class="n">family_dependencies</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>                <span class="n">k</span><span class="p">:</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;family_dependencies&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span class="p">},</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>            <span class="n">ivh_discretization_dependent_unless</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;ivh_discretization_dependent_unless&quot;</span><span class="p">],</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>            <span class="n">comparison_mode</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;comparison_mode&quot;</span><span class="p">],</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="p">)</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_version</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DeduplicationRules&quot;</span><span class="p">:</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        Get rules for a specific version from the registry.</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">            version: Version string (e.g., &quot;1.0.0&quot;).</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">            The DeduplicationRules for that version.</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">            ValueError: If the version is not in the registry.</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="k">if</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RULES_REGISTRY</span><span class="p">:</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>                <span class="sa">f</span><span class="s2">&quot;Unknown deduplication rules version: </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>                <span class="sa">f</span><span class="s2">&quot;Available versions: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">RULES_REGISTRY</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>            <span class="p">)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="k">return</span> <span class="n">RULES_REGISTRY</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pictologics.deduplication.DeduplicationRules.version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">version</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pictologics.deduplication.DeduplicationRules.family_dependencies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">family_dependencies</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

    </div>

</div>






  </div>

    </div>

</div><hr />
<h2 id="preprocessingsignature">PreprocessingSignature</h2>


<div class="doc doc-object doc-class">



<h2 id="pictologics.deduplication.PreprocessingSignature" class="doc doc-heading">
            <code>pictologics.deduplication.PreprocessingSignature</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">



        <p>A hashable signature representing a preprocessing configuration.</p>
<p>Contains both a hash for fast comparison and the full JSON representation
for human-readable debugging and logging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="pictologics.deduplication.PreprocessingSignature.hash">hash</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SHA256 hash of the normalized preprocessing steps.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="json_repr

  
      instance-attribute
   (pictologics.deduplication.PreprocessingSignature.json_repr)" href="#pictologics.deduplication.PreprocessingSignature.json_repr">json_repr</a></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Full JSON string of the preprocessing steps.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>pictologics/deduplication.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="k">class</span><span class="w"> </span><span class="nc">PreprocessingSignature</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">    A hashable signature representing a preprocessing configuration.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">    Contains both a hash for fast comparison and the full JSON representation</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">    for human-readable debugging and logging.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">        hash: SHA256 hash of the normalized preprocessing steps.</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="sd">        json_repr: Full JSON string of the preprocessing steps.</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>    <span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>    <span class="n">json_repr</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PreprocessingSignature</span><span class="p">):</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">hash</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">)</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_steps</span><span class="p">(</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="bp">cls</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PreprocessingSignature&quot;</span><span class="p">:</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="sd">        Create a signature from a list of (step_name, params) tuples.</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="sd">            steps: List of (step_name, params_dict) tuples, sorted by step name.</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">            A PreprocessingSignature with deterministic hash and JSON.</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>        <span class="c1"># Create deterministic JSON representation</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="n">json_repr</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>            <span class="p">{</span><span class="n">step_name</span><span class="p">:</span> <span class="n">_normalize_params</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">},</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>            <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>            <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">),</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>        <span class="p">)</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>        <span class="c1"># Compute SHA256 hash</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span class="n">hash_value</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">json_repr</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">hash</span><span class="o">=</span><span class="n">hash_value</span><span class="p">,</span> <span class="n">json_repr</span><span class="o">=</span><span class="n">json_repr</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize to dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_repr</span><span class="p">}</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;PreprocessingSignature&quot;</span><span class="p">:</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize from dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">hash</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;hash&quot;</span><span class="p">],</span> <span class="n">json_repr</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pictologics.deduplication.PreprocessingSignature.json_repr" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">json_repr</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="pictologics.deduplication.PreprocessingSignature.from_steps" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_steps</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Create a signature from a list of (step_name, params) tuples.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>steps</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of (step_name, params_dict) tuples, sorted by step name.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>&#39;PreprocessingSignature&#39;</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A PreprocessingSignature with deterministic hash and JSON.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pictologics/deduplication.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="k">def</span><span class="w"> </span><span class="nf">from_steps</span><span class="p">(</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span class="bp">cls</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PreprocessingSignature&quot;</span><span class="p">:</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="sd">    Create a signature from a list of (step_name, params) tuples.</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="sd">        steps: List of (step_name, params_dict) tuples, sorted by step name.</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">        A PreprocessingSignature with deterministic hash and JSON.</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>    <span class="c1"># Create deterministic JSON representation</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="n">json_repr</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>        <span class="p">{</span><span class="n">step_name</span><span class="p">:</span> <span class="n">_normalize_params</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="k">for</span> <span class="n">step_name</span><span class="p">,</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">},</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>        <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">),</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="p">)</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>    <span class="c1"># Compute SHA256 hash</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span class="n">hash_value</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">json_repr</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">hash</span><span class="o">=</span><span class="n">hash_value</span><span class="p">,</span> <span class="n">json_repr</span><span class="o">=</span><span class="n">json_repr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="configurationanalyzer">ConfigurationAnalyzer</h2>


<div class="doc doc-object doc-class">



<h2 id="pictologics.deduplication.ConfigurationAnalyzer" class="doc doc-heading">
            <code>pictologics.deduplication.ConfigurationAnalyzer</code>


</h2>


    <div class="doc doc-contents first">



        <p>Analyzes multiple configurations to create a deduplication plan.</p>
<p>Compares preprocessing steps across configurations for each feature family
and identifies which config/family pairs produce identical results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>configs</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict mapping config names to lists of step dicts.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rules</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="pictologics.deduplication.DeduplicationRules


  
      dataclass
  " href="#pictologics.deduplication.DeduplicationRules">DeduplicationRules</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DeduplicationRules to use (defaults to current version).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>pictologics/deduplication.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="k">class</span><span class="w"> </span><span class="nc">ConfigurationAnalyzer</span><span class="p">:</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a><span class="sd">    Analyzes multiple configurations to create a deduplication plan.</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">    Compares preprocessing steps across configurations for each feature family</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">    and identifies which config/family pairs produce identical results.</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">        configs: Dict mapping config names to lists of step dicts.</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">        rules: The DeduplicationRules to use (defaults to current version).</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>        <span class="n">configs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>        <span class="n">rules</span><span class="p">:</span> <span class="n">DeduplicationRules</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>    <span class="p">):</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">configs</span> <span class="o">=</span> <span class="n">configs</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rules</span> <span class="o">=</span> <span class="n">rules</span> <span class="ow">or</span> <span class="n">get_default_rules</span><span class="p">()</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">analyze</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DeduplicationPlan</span><span class="p">:</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">        Analyze configurations and create a deduplication plan.</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">            A DeduplicationPlan mapping each config/family to its source.</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>        <span class="n">plan</span> <span class="o">=</span> <span class="n">DeduplicationPlan</span><span class="p">(</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>            <span class="n">rules</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">,</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>            <span class="n">configs_hash</span><span class="o">=</span><span class="n">_hash_configs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="p">),</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>        <span class="p">)</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>        <span class="c1"># Get all feature families from rules</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>        <span class="n">all_families</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">family_dependencies</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>        <span class="c1"># Track first occurrence of each signature per family</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>        <span class="c1"># signature_hash -&gt; (first_config_name, signature)</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>        <span class="n">first_occurrence</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PreprocessingSignature</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>            <span class="n">family</span><span class="p">:</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">family</span> <span class="ow">in</span> <span class="n">all_families</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>        <span class="p">}</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>        <span class="c1"># Process each config</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>        <span class="k">for</span> <span class="n">config_name</span><span class="p">,</span> <span class="n">steps</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>            <span class="c1"># Determine which families this config extracts</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>            <span class="n">families_in_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_families_in_config</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>            <span class="k">for</span> <span class="n">family</span> <span class="ow">in</span> <span class="n">families_in_config</span><span class="p">:</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>                <span class="k">if</span> <span class="n">family</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_families</span><span class="p">:</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>                    <span class="c1"># Unknown family, skip</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>                <span class="c1"># Extract relevant preprocessing steps</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>                <span class="n">relevant_steps</span> <span class="o">=</span> <span class="n">extract_relevant_steps</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">family</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">)</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>                <span class="c1"># Create signature</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>                <span class="n">signature</span> <span class="o">=</span> <span class="n">PreprocessingSignature</span><span class="o">.</span><span class="n">from_steps</span><span class="p">(</span><span class="n">relevant_steps</span><span class="p">)</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>                <span class="n">plan</span><span class="o">.</span><span class="n">signatures</span><span class="p">[(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">)]</span> <span class="o">=</span> <span class="n">signature</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>                <span class="c1"># Check if this signature was seen before</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>                <span class="k">if</span> <span class="n">signature</span><span class="o">.</span><span class="n">hash</span> <span class="ow">in</span> <span class="n">first_occurrence</span><span class="p">[</span><span class="n">family</span><span class="p">]:</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>                    <span class="c1"># Reuse from first config with this signature</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>                    <span class="n">source_config</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">first_occurrence</span><span class="p">[</span><span class="n">family</span><span class="p">][</span><span class="n">signature</span><span class="o">.</span><span class="n">hash</span><span class="p">]</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>                    <span class="n">plan</span><span class="o">.</span><span class="n">sources</span><span class="p">[(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">)]</span> <span class="o">=</span> <span class="n">source_config</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>                    <span class="c1"># First occurrence - compute fresh</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>                    <span class="n">first_occurrence</span><span class="p">[</span><span class="n">family</span><span class="p">][</span><span class="n">signature</span><span class="o">.</span><span class="n">hash</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>                    <span class="n">plan</span><span class="o">.</span><span class="n">sources</span><span class="p">[(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">)]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>        <span class="k">return</span> <span class="n">plan</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_families_in_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="sd">        Determine which feature families a config will extract.</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="n">families</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;extract_features&quot;</span><span class="p">:</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>                <span class="n">params</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">,</span> <span class="p">{})</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>                <span class="c1"># Get explicitly listed families</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>                <span class="n">family_list</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>                    <span class="s2">&quot;families&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;intensity&quot;</span><span class="p">,</span> <span class="s2">&quot;morphology&quot;</span><span class="p">,</span> <span class="s2">&quot;texture&quot;</span><span class="p">,</span> <span class="s2">&quot;histogram&quot;</span><span class="p">,</span> <span class="s2">&quot;ivh&quot;</span><span class="p">]</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>                <span class="p">)</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>                <span class="n">families</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">family_list</span><span class="p">)</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>                <span class="c1"># Check for texture sub-families</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>                <span class="k">if</span> <span class="s2">&quot;texture&quot;</span> <span class="ow">in</span> <span class="n">families</span><span class="p">:</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>                    <span class="c1"># Texture expands to all texture families</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>                    <span class="n">families</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s2">&quot;glcm&quot;</span><span class="p">,</span> <span class="s2">&quot;glrlm&quot;</span><span class="p">,</span> <span class="s2">&quot;glszm&quot;</span><span class="p">,</span> <span class="s2">&quot;gldzm&quot;</span><span class="p">,</span> <span class="s2">&quot;ngtdm&quot;</span><span class="p">,</span> <span class="s2">&quot;ngldm&quot;</span><span class="p">])</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>                <span class="c1"># Check optional intensity features</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>                <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_spatial_intensity&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>                    <span class="n">families</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;spatial_intensity&quot;</span><span class="p">)</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>                <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_local_intensity&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>                    <span class="n">families</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;local_intensity&quot;</span><span class="p">)</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>        <span class="k">return</span> <span class="n">families</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="pictologics.deduplication.ConfigurationAnalyzer.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">configs</span><span class="p">,</span> <span class="n">rules</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pictologics/deduplication.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>    <span class="n">configs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>    <span class="n">rules</span><span class="p">:</span> <span class="n">DeduplicationRules</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="p">):</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">configs</span> <span class="o">=</span> <span class="n">configs</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">rules</span> <span class="o">=</span> <span class="n">rules</span> <span class="ow">or</span> <span class="n">get_default_rules</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pictologics.deduplication.ConfigurationAnalyzer.analyze" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">analyze</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Analyze configurations and create a deduplication plan.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="pictologics.deduplication.DeduplicationPlan


  
      dataclass
  " href="#pictologics.deduplication.DeduplicationPlan">DeduplicationPlan</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DeduplicationPlan mapping each config/family to its source.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pictologics/deduplication.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="k">def</span><span class="w"> </span><span class="nf">analyze</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DeduplicationPlan</span><span class="p">:</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">    Analyze configurations and create a deduplication plan.</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">        A DeduplicationPlan mapping each config/family to its source.</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>    <span class="n">plan</span> <span class="o">=</span> <span class="n">DeduplicationPlan</span><span class="p">(</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>        <span class="n">rules</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">,</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>        <span class="n">configs_hash</span><span class="o">=</span><span class="n">_hash_configs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="p">),</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>    <span class="p">)</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>    <span class="c1"># Get all feature families from rules</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>    <span class="n">all_families</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">family_dependencies</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>    <span class="c1"># Track first occurrence of each signature per family</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>    <span class="c1"># signature_hash -&gt; (first_config_name, signature)</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>    <span class="n">first_occurrence</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PreprocessingSignature</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>        <span class="n">family</span><span class="p">:</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">family</span> <span class="ow">in</span> <span class="n">all_families</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>    <span class="p">}</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>    <span class="c1"># Process each config</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>    <span class="k">for</span> <span class="n">config_name</span><span class="p">,</span> <span class="n">steps</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>        <span class="c1"># Determine which families this config extracts</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>        <span class="n">families_in_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_families_in_config</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span class="k">for</span> <span class="n">family</span> <span class="ow">in</span> <span class="n">families_in_config</span><span class="p">:</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>            <span class="k">if</span> <span class="n">family</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_families</span><span class="p">:</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>                <span class="c1"># Unknown family, skip</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>                <span class="k">continue</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>            <span class="c1"># Extract relevant preprocessing steps</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>            <span class="n">relevant_steps</span> <span class="o">=</span> <span class="n">extract_relevant_steps</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="n">family</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">)</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>            <span class="c1"># Create signature</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>            <span class="n">signature</span> <span class="o">=</span> <span class="n">PreprocessingSignature</span><span class="o">.</span><span class="n">from_steps</span><span class="p">(</span><span class="n">relevant_steps</span><span class="p">)</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>            <span class="n">plan</span><span class="o">.</span><span class="n">signatures</span><span class="p">[(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">)]</span> <span class="o">=</span> <span class="n">signature</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>            <span class="c1"># Check if this signature was seen before</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>            <span class="k">if</span> <span class="n">signature</span><span class="o">.</span><span class="n">hash</span> <span class="ow">in</span> <span class="n">first_occurrence</span><span class="p">[</span><span class="n">family</span><span class="p">]:</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>                <span class="c1"># Reuse from first config with this signature</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>                <span class="n">source_config</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">first_occurrence</span><span class="p">[</span><span class="n">family</span><span class="p">][</span><span class="n">signature</span><span class="o">.</span><span class="n">hash</span><span class="p">]</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>                <span class="n">plan</span><span class="o">.</span><span class="n">sources</span><span class="p">[(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">)]</span> <span class="o">=</span> <span class="n">source_config</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>                <span class="c1"># First occurrence - compute fresh</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>                <span class="n">first_occurrence</span><span class="p">[</span><span class="n">family</span><span class="p">][</span><span class="n">signature</span><span class="o">.</span><span class="n">hash</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>                <span class="n">plan</span><span class="o">.</span><span class="n">sources</span><span class="p">[(</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">)]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>    <span class="k">return</span> <span class="n">plan</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="deduplicationplan">DeduplicationPlan</h2>


<div class="doc doc-object doc-class">



<h2 id="pictologics.deduplication.DeduplicationPlan" class="doc doc-heading">
            <code>pictologics.deduplication.DeduplicationPlan</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">



        <p>A plan describing which config/family pairs should compute vs. reuse.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="pictologics.deduplication.DeduplicationPlan.rules">rules</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="pictologics.deduplication.DeduplicationRules


  
      dataclass
  " href="#pictologics.deduplication.DeduplicationRules">DeduplicationRules</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DeduplicationRules used to create this plan.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pictologics.deduplication.DeduplicationPlan.signatures">signatures</span></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>], <a class="autorefs autorefs-internal" title="pictologics.deduplication.PreprocessingSignature


  
      dataclass
  " href="#pictologics.deduplication.PreprocessingSignature">PreprocessingSignature</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of (config_name, family) to PreprocessingSignature.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pictologics.deduplication.DeduplicationPlan.sources">sources</span></code></td>
            <td>
                  <code><span title="dict">dict</span>[<span title="tuple">tuple</span>[<span title="str">str</span>, <span title="str">str</span>], <span title="str">str</span> | None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping of (config_name, family) to source config name (or None if first).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="pictologics.deduplication.DeduplicationPlan.configs_hash">configs_hash</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Hash of the configs dict to detect modifications.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>pictologics/deduplication.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="nd">@dataclass</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="k">class</span><span class="w"> </span><span class="nc">DeduplicationPlan</span><span class="p">:</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">    A plan describing which config/family pairs should compute vs. reuse.</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">        rules: The DeduplicationRules used to create this plan.</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">        signatures: Mapping of (config_name, family) to PreprocessingSignature.</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">        sources: Mapping of (config_name, family) to source config name (or None if first).</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">        configs_hash: Hash of the configs dict to detect modifications.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>    <span class="n">rules</span><span class="p">:</span> <span class="n">DeduplicationRules</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>    <span class="n">signatures</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">PreprocessingSignature</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>    <span class="p">)</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>    <span class="n">sources</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>    <span class="n">configs_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">should_compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">family</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">        Check if this config/family should be computed fresh.</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">        Returns True if this is the first occurrence of this signature,</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">        False if it can be copied from another config.</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">family</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">        Get the source config to copy from, or None if should compute.</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="n">config_name</span><span class="p">,</span> <span class="n">family</span><span class="p">))</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_stale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_configs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a><span class="sd">        Check if this plan is stale due to config modifications.</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>        <span class="n">current_hash</span> <span class="o">=</span> <span class="n">_hash_configs</span><span class="p">(</span><span class="n">current_configs</span><span class="p">)</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>        <span class="k">return</span> <span class="n">current_hash</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs_hash</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize the plan to a dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>            <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>            <span class="s2">&quot;configs_hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs_hash</span><span class="p">,</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>            <span class="s2">&quot;signatures&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>                <span class="p">{</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>                    <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="n">config</span><span class="p">,</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>                    <span class="s2">&quot;family&quot;</span><span class="p">:</span> <span class="n">family</span><span class="p">,</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>                    <span class="o">**</span><span class="n">sig</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>                <span class="p">}</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>                <span class="k">for</span> <span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">family</span><span class="p">),</span> <span class="n">sig</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signatures</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>            <span class="p">],</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>            <span class="s2">&quot;sources&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>                <span class="p">{</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>                    <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="n">config</span><span class="p">,</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>                    <span class="s2">&quot;family&quot;</span><span class="p">:</span> <span class="n">family</span><span class="p">,</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">source</span><span class="p">,</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>                <span class="p">}</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>                <span class="k">for</span> <span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">family</span><span class="p">),</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>            <span class="p">],</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>        <span class="p">}</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;DeduplicationPlan&quot;</span><span class="p">:</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Deserialize a plan from a dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>        <span class="n">rules</span> <span class="o">=</span> <span class="n">DeduplicationRules</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;rules&quot;</span><span class="p">])</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>        <span class="n">signatures</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;signatures&quot;</span><span class="p">,</span> <span class="p">[]):</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;config&quot;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;family&quot;</span><span class="p">])</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>            <span class="n">signatures</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">PreprocessingSignature</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>        <span class="n">sources</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sources&quot;</span><span class="p">,</span> <span class="p">[]):</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;config&quot;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;family&quot;</span><span class="p">])</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>            <span class="n">sources</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>            <span class="n">rules</span><span class="o">=</span><span class="n">rules</span><span class="p">,</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>            <span class="n">signatures</span><span class="o">=</span><span class="n">signatures</span><span class="p">,</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>            <span class="n">sources</span><span class="o">=</span><span class="n">sources</span><span class="p">,</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>            <span class="n">configs_hash</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;configs_hash&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>        <span class="p">)</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">        Get a summary of the deduplication plan.</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">            Dict with counts of computed vs reused families.</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>        <span class="n">computed</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>        <span class="n">reused</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;computed&quot;</span><span class="p">:</span> <span class="n">computed</span><span class="p">,</span> <span class="s2">&quot;reused&quot;</span><span class="p">:</span> <span class="n">reused</span><span class="p">,</span> <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="n">computed</span> <span class="o">+</span> <span class="n">reused</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div><hr />
<h2 id="rules-registry">Rules Registry</h2>
<p>The <code>RULES_REGISTRY</code> provides versioned deduplication rules for reproducibility:</p>


<div class="doc doc-object doc-attribute">



<h2 id="pictologics.deduplication.RULES_REGISTRY" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pictologics</span><span class="o">.</span><span class="n">deduplication</span><span class="o">.</span><span class="n">RULES_REGISTRY</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;1.0.0&#39;</span><span class="p">:</span> <span class="n">DEDUPLICATION_RULES_V1_0_0</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">

    </div>

</div><h3 id="available-versions">Available Versions</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Version</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>"1.0.0"</code></td>
<td style="text-align: left;">Initial rules defining feature family dependencies</td>
</tr>
</tbody>
</table>
<h3 id="helper-functions">Helper Functions</h3>


<div class="doc doc-object doc-function">


<h2 id="pictologics.deduplication.get_default_rules" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pictologics</span><span class="o">.</span><span class="n">deduplication</span><span class="o">.</span><span class="n">get_default_rules</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents first">

        <p>Get the current default deduplication rules.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>pictologics/deduplication.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_default_rules</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">DeduplicationRules</span><span class="p">:</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current default deduplication rules.&quot;&quot;&quot;</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span class="k">return</span> <span class="n">RULES_REGISTRY</span><span class="p">[</span><span class="n">CURRENT_RULES_VERSION</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />
<h2 id="feature-family-dependencies">Feature Family Dependencies</h2>
<p>The deduplication system understands which preprocessing steps affect which feature families:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Feature Family</th>
<th style="text-align: left;">Relevant Preprocessing Steps</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>morphology</code></td>
<td style="text-align: left;"><code>resample</code>, <code>binarize_mask</code>, <code>keep_largest_component</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>intensity</code></td>
<td style="text-align: left;"><code>resample</code>, <code>resegment</code>, <code>filter_outliers</code>, <code>filter</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>spatial_intensity</code></td>
<td style="text-align: left;">Same as <code>intensity</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>local_intensity</code></td>
<td style="text-align: left;">Same as <code>intensity</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>histogram</code></td>
<td style="text-align: left;"><code>resample</code>, <code>resegment</code>, <code>filter_outliers</code>, <code>filter</code>, <code>binarize_mask</code>, <code>keep_largest_component</code>, <code>discretise</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>ivh</code></td>
<td style="text-align: left;">Same as <code>histogram</code> (unless <code>ivh_use_continuous=True</code>, which removes <code>discretise</code> dependency)</td>
</tr>
<tr>
<td style="text-align: left;"><code>texture</code> (all subfamilies)</td>
<td style="text-align: left;">Same as <code>histogram</code></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Filters Affect Intensity Features</p>
<p>When using image filters (LoG, Gabor, Wavelets, Laws, etc.), intensity features are computed 
from the <strong>filtered response map</strong>, not the original image. Therefore, different filter 
configurations will produce different intensity features and cannot be deduplicated.</p>
<p><strong>Morphology features are not affected by filters</strong> since they are computed from the mask 
geometry, not intensity values. This means morphology can be computed once and reused 
across all filter configurations.</p>
</div>
<p>When two configurations share identical values for the relevant preprocessing steps of a feature family, that family is computed once and the result is reused.</p>
<hr />
<h2 id="integration-with-radiomicspipeline">Integration with RadiomicsPipeline</h2>
<p>The <code>RadiomicsPipeline</code> class integrates deduplication through these parameters:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>deduplicate</code></td>
<td style="text-align: left;"><code>bool</code></td>
<td style="text-align: left;"><code>True</code></td>
<td style="text-align: left;">Enable/disable deduplication</td>
</tr>
<tr>
<td style="text-align: left;"><code>deduplication_rules</code></td>
<td style="text-align: left;"><code>str</code> or <code>DeduplicationRules</code></td>
<td style="text-align: left;"><code>"1.0.0"</code></td>
<td style="text-align: left;">Rules version for reproducibility</td>
</tr>
</tbody>
</table>
<p>These settings are preserved during serialization (<code>to_dict()</code>, <code>save_configs()</code>, etc.) and restored during deserialization.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Access pipeline deduplication settings</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">pipeline</span> <span class="o">=</span> <span class="n">RadiomicsPipeline</span><span class="p">(</span><span class="n">deduplicate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">deduplication_enabled</span><span class="p">)</span>    <span class="c1"># True</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">deduplication_stats</span><span class="p">)</span>      <span class="c1"># Statistics after run()</span>
</code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 Márton Kolossváry. Licensed under Apache 2.0.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>